<!DOCTYPE html>
<html>
<head>
    <title>PubTrends - Publication Analysis Service</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
          crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"
            integrity="sha384-tsQFqpEReu7ZLhBV2VZlAu7zcOV+rXbYlF2cqB8txI/8aZajjp4Bqd+V6D5IgvKT"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
            integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
            integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
            crossorigin="anonymous"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}?v=1"/>
    <!--    <link rel="stylesheet" href="../static/style.css" />-->

    <!-- IntroJS feature tour -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intro.js/2.9.3/introjs.css"
          integrity="sha256-OYXGS5m4oWZAAqoAKpf7Y3bIdzdd9jBfly/xCavEpGw=" crossorigin="anonymous"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intro.js/2.9.3/intro.js"
            integrity="sha256-SPZP/x8QDPEhRlpJjet4AD5X4ergPWcxjhMn73SwyOE="
            crossorigin="anonymous"></script>

    <script>
        // Example starter JavaScript for disabling form submissions if there are invalid fields
        (function () {
            'use strict';
            window.addEventListener('load', function () {
                // Fetch all the forms we want to apply custom Bootstrap validation styles to
                const forms = document.getElementsByClassName('needs-validation');
                // Loop over them and prevent submission
                Array.prototype.filter.call(forms, function (form) {
                    form.addEventListener('submit', function (event) {
                        if (form.checkValidity() === false) {
                            event.preventDefault();
                            event.stopPropagation();
                        }
                        form.classList.add('was-validated');
                    }, false);
                });
            }, false);
        })();
    </script>
</head>
<body>
<div class="container">
    <div class="mt-4">
        <h1>PubTrends</h1>
        <p class="lead">
            Explore intellectual structure of research area or analyze similar papers
        </p>
        <hr>
        View frequent words in publications, most cited papers, explore topics and trends, analyze quantitative
        features, visualize graphs of citations and papers similarity. Find most cited similar papers, important prior,
        and derivative works for any paper.<br>
        We apply bibliometrics methods for citations information and natural language processing algorithms for papers
        text analysis. Pubtrends includes more than 30 million of papers and 175 mln citations of biomedical literature
        from <a
            class="link"
            href="https://pubmed.ncbi.nlm.nih.gov/">PubMedÂ®</a> database.<br>
        <a id="tour-start" class="link"
           href="javascript:void(0);" onclick="startIntro();">Take a tour!</a>
    </div>
    <main class="card mt-3" role="main">
        <div class="card-header">
            <ul class="nav nav-tabs card-header-tabs" id="tabs-list" role="tablist">
                <li id="step1" class="nav-item">
                    <a class="nav-link active grey" id="topic-tab" data-toggle="tab" href="#topic"
                       role="tab"
                       aria-controls="topic" aria-selected="true">Topic Analysis</a>
                </li>
                <li id="step1-2" class="nav-item">
                    <a class="nav-link grey" id="paper-tab" data-toggle="tab" href="#paper"
                       role="tab"
                       aria-controls="paper" aria-selected="false">Paper Analysis</a>
                </li>
            </ul>
        </div>
        <div class="card-body">
            <div class="tab-content">
                <!-- Form for topic analysis -->
                <div class="tab-pane fade show active" id="topic" role="tabpanel"
                     aria-labelledby="topic-tab">
                    <form action="search_terms" method="POST" class="needs-validation mb-2" novalidate>
                        <div class="row no-gutters align-items-center">
                            <div id="step2" class="col input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="query-addon">Query</span>
                                </div>
                                <input class="form-control form-control-borderless" type="search"
                                       name="query" id="terms-input"
                                       placeholder="{{min_words_message}}Use double quotes for phrase search, join queries by commas."
                                       aria-describedby="query-addon"
                                       autofocus required>
                            </div>
                            <!--end of col-->
                            <div id="step4" class="col-auto ml-2">
                                <button class="btn btn-success" type="submit">Search</button>
                            </div>
                            <!--end of col-->
                        </div>
                        <div class="mt-2">
                            <a id="step3" class="link" data-toggle="collapse" href="#collapseSearchAdvanced"
                               role="button" aria-expanded="false">
                                <small>Advanced settings</small>
                            </a>
                        </div>
                        <div id="collapseSearchAdvanced" class="collapse mt-2">
                            <div class="row no-gutters align-items-center">
                                <div class="col input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text" id="source-addon">Source</span>
                                    </div>
                                    <select class="form-control" name="source"
                                            aria-describedby="source-addon">
                                        {% if pm_enabled %}
                                        <option>Pubmed</option>
                                        {% endif %}
                                        {% if ss_enabled %}
                                        <option>Semantic Scholar</option>
                                        {% endif %}
                                    </select>
                                </div>
                                <div class="ml-2 col input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text" id="sort-addon">Sort By</span>
                                    </div>
                                    <select class="form-control" name="sort"
                                            aria-describedby="sort-addon">
                                        <option>Most Cited</option>
                                        <option>Most Recent</option>
                                        <option>Most Relevant</option>
                                    </select>
                                </div>
                                <div class="ml-2 col input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text" id="amount-addon">Search</span>
                                    </div>
                                    <select class="form-control" aria-describedby="amount-addon"
                                            name="limit">
                                        {% for limit in limits %}
                                        {% if limit == default_limit %}
                                        <option selected>{{ limit }}</option>
                                        {% else %}
                                        <option>{{ limit }}</option>
                                        {% endif %}
                                        {% endfor %}
                                    </select>
                                    <div class="input-group-append">
                                        <span class="input-group-text">papers</span>
                                    </div>
                                </div>
                            </div>
                            <div class="row no-gutters align-items-center mt-2">
                                <div class="col input-group">
                                    <label style="margin-top: auto;margin-bottom: auto">
                                        <input type="checkbox" checked="checked" name="noreviews" id="noreviews">
                                        <span class="checkmark">Prefer no reviews</span>
                                    </label>
                                </div>
                                <div class="ml-2 col input-group d-flex align-items-center">
                                    <label for="expand" style="margin-top: auto;margin-bottom: auto">
                                        Expand by references %
                                    </label>
                                    <input id="expand" name="expand" class="ml-1 form-control" type="number"
                                           min="0" max="100" step="10" value="20"/>
                                </div>
                                <div class="ml-2 col input-group">
                                </div>
                            </div>
                        </div>
                    </form>
                    Read about example search <a class="link" href="/about.html" target="_blank" role="button">here</a>.
                </div>

                <!-- Form for paper analysis -->
                <div class="tab-pane fade" id="paper" role="tabpanel" aria-labelledby="paper-tab">
                    <form action="search_paper" method="POST" class="needs-validation" novalidate>
                        <div class="row no-gutters align-items-center">
                            <div id="stepP1" class="col-auto">
                                <select id="paper-key" class="form-control" name="key" required>
                                    <option disabled></option>
                                    <option value="title">Title</option>
                                    <option value="doi">DOI</option>
                                    <option value="id">ID</option>
                                </select>
                            </div>
                            <div id="stepP2" class="col ml-2">
                                <input class="form-control form-control-borderless" type="search"
                                       name="value" id="paper-input"
                                       placeholder="Enter paper details"
                                       aria-describedby="query-addon"
                                       autofocus
                                       required>
                            </div>
                            <!--end of col-->
                            <div id="stepP3" class="col-auto ml-2">
                                <button class="btn btn-success" type="submit">Search</button>
                            </div>
                        </div>
                        <div class="mt-2">
                            <a class="link" data-toggle="collapse" href="#collapsePaperAdvanced"
                               role="button" aria-expanded="false">
                                <small>Advanced settings</small>
                            </a>
                        </div>
                        <div id="collapsePaperAdvanced" class="collapse mt-2">
                            <div class="row no-gutters align-items-center">
                                <div class="col-4 input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text" id="paper-source-addon">Source</span>
                                    </div>
                                    <select class="form-control" name="source"
                                            aria-describedby="source-addon">
                                        {% if pm_enabled %}
                                        <option>Pubmed</option>
                                        {% endif %}
                                        {% if ss_enabled %}
                                        <option>Semantic Scholar</option>
                                        {% endif %}
                                    </select>
                                </div>
                                <div class="ml-2 col-4 input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text" id="paper-amount-addon">Search</span>
                                    </div>
                                    <select class="form-control" aria-describedby="amount-addon"
                                            name="limit">
                                        {% for limit in limits %}
                                        {% if limit == default_limit %}
                                        <option selected>{{ limit }}</option>
                                        {% else %}
                                        <option>{{ limit }}</option>
                                        {% endif %}
                                        {% endfor %}
                                    </select>
                                    <div class="input-group-append">
                                        <span class="input-group-text">papers</span>
                                    </div>
                                </div>
                            </div>
                    </form>
                </div>
            </div>
        </div>
    </main>
</div>
<footer>
    <p>version {{ version }}<br/>
        &copy; 2019-2020 <a href="https://research.jetbrains.org/groups/biolabs"
                            title="JetBrains Research BioLabs"
                            target="_blank">JetBrains Research</a></p>
</footer>

<script type="text/javascript">
    function startIntro() {
        var intro = introJs();
        intro.setOptions({
            steps: [
                {
                    intro: "Welcome to PubTrends, a scientific literature explorer!<br>" +
                        "This quick tutorial will guide you through the features."
                },
                {
                    element: '#step1',
                    intro: "Proceed with the <em>Topic Analysis</em> tab to study the research topic of interest."
                },
                {
                    element: '#step1-2',
                    intro: "<em>Paper Analysis</em> finds similar papers and most important prior and derivative works."
                },
                {
                    element: '#step2',
                    intro: "Enter search query to define the topic of interest.<br>" +
                        "{{min_words_message}}Use double quotes for phrase search, join queries by commas."
                },
                {
                    element: '#step3',
                    intro: "You can additionally configure:" +
                        "<ul>" +
                        "<li><em>Source</em>: database of scientific publications</li>" +
                        "<li><em>Sort by</em>: papers ranking - relevance, recency or number of citations</li>" +
                        "<li><em>Search</em>: number of papers to look for</li>" +
                        "<li><em>Prefer no reviews</em>: ignore review papers in the search phase</li>" +
                        "<li><em>Expand %</em>: fraction of paper covered by references</li>" +
                        "</ul>"
                },
                {
                    element: '#step4',
                    intro: "Click the <em>Search</em> button!<br>" +
                        "You will be redirected automatically to a results page once analysis is complete.<br>" +
                        "Click <em>About</em> button to learn about results."
                }
            ]
        });

        intro.start();
    }
</script>

</body>
</html>